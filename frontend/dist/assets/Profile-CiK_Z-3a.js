import{a as m,j as e,L as f,r as p,b as h}from"./index-DgtH0Sqm.js";import{I as c}from"./index-DGT-xrSd.js";import{a as x,u as d}from"./useMutation-C1y1FuqP.js";import{a as t}from"./apiRequests-CS8AnOA_.js";import{G as y}from"./Gallery-Cp2YQe1L.js";import{f as j}from"./index-BojVbZw0.js";import{c as u}from"./createLucideIcon-Jv87yse_.js";import"./useBaseQuery-gpRBczeQ.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],v=u("ellipsis",g);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],w=u("share",N),k=({isFollowing:a,userName:o})=>{const i=m(),s=x({mutationFn:async r=>(await t.post(`/users/follow/${r}`)).data,onSuccess:()=>{i.invalidateQueries({queryKey:["profile",o]})}});return e.jsx("button",{onClick:()=>s.mutate(o),disabled:s.isPending,className:`\r
                 disabled:bg-gray-400 disabled:cursor-not-allowed`,children:s.isPending?"Processing...":a?"Unfollow":"Follow"})},P=({userId:a})=>{const{isPending:o,error:i,data:n}=d({queryKey:["boards",a],queryFn:()=>t.get(`/boards/${a}`).then(s=>s.data)});return o?"Loading......":i?"An error has occurred: "+i.message:!n||n.length===0?"No boards found!":e.jsx("div",{className:"Boards",children:n==null?void 0:n.map(s=>{var r;return e.jsxs(f,{to:`/search?boardId=${s._id}`,className:"collection",children:[e.jsx(c,{src:(r=s.firstPin)==null?void 0:r.media}),e.jsxs("div",{className:"collectionInfo",children:[e.jsx("h1",{children:s.title}),e.jsxs("span",{children:[s.pinCount," Pins . ",j(s.createdAt)]})]})]},s._id)})})},U=()=>{const[a,o]=p.useState("saved"),{username:i}=h(),{isPending:n,error:s,data:r}=d({queryKey:["profile",i],queryFn:()=>t.get(`/users/${i}`).then(l=>l.data)});return n?"Loading......":s?"An error has occurred: "+s.message:r?e.jsxs("div",{className:"profilePage",children:[e.jsx(c,{src:r.img||"/general/noAvatar.png",alt:"User Avatar",w:100,h:100,classname:"rounded-full object-contain"}),e.jsx("h1",{children:r.displayName}),e.jsxs("span",{children:["@",r.userName]}),e.jsxs("div",{className:"",children:[r.followerCount," followers Â· ",r.followingCount," followings"]}),e.jsxs("div",{className:"profileInteractions",children:[e.jsx(w,{}),e.jsx("div",{className:"profileButtons",children:e.jsx(k,{isFollowing:r.isFollowing,userName:r.userName})}),e.jsx(v,{})]}),e.jsxs("div",{className:"profileOptions",children:[e.jsx("span",{onClick:()=>o("created"),className:a==="created"?"active":"",children:"Created"}),e.jsx("span",{onClick:()=>o("saved"),className:a==="saved"?"active":"",children:"Saved"})]}),a==="created"?e.jsx(y,{userId:r._id}):e.jsx(P,{userId:r._id})]}):"User not found!"};export{U as default};
